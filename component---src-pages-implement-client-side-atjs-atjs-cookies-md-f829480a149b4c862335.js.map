{"version":3,"sources":["webpack://dev-site-documentation-template/./src/pages/implement/client-side/atjs/atjs-cookies.md"],"names":["name","_frontmatter","InlineAlert","props","console","warn","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","mdxType","parentName","variant","slots","isMDXComponent"],"mappings":"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","file":"component---src-pages-implement-client-side-atjs-atjs-cookies-md-f829480a149b4c862335.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/target-developers/target-developers/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst InlineAlert = makeShortcode(\"InlineAlert\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"atjs-cookies\"\n    }}>{`at.js cookies`}</h1>\n    <p>{`Information about at.js 2.x and at.js 1.`}<em parentName=\"p\">{`x`}</em>{` cookie behavior.`}</p>\n    <h2 {...{\n      \"id\": \"atjs-2x-cookie-behavior\"\n    }}>{`at.js 2.x cookie behavior`}</h2>\n    <p>{`For at.js version 2.0.0, `}<em parentName=\"p\">{`only first-party cookies are supported`}</em>{`. Just like in at.js 1.`}<em parentName=\"p\">{`x`}</em>{`, the first-party cookie, “mbox,” is stored in `}<inlineCode parentName=\"p\">{`clientdomain.com`}</inlineCode>{`, where `}<inlineCode parentName=\"p\">{`clientdomain`}</inlineCode>{` is your domain.`}</p>\n    <p>{`at.js generates a session ID and stores it in the cookie. The first response contains any activity information, as well as the `}<inlineCode parentName=\"p\">{`TNT`}</inlineCode>{` or `}<inlineCode parentName=\"p\">{`PC ID`}</inlineCode>{` generated by the Target servers. at.js then writes the `}<inlineCode parentName=\"p\">{`TNT/PC ID`}</inlineCode>{` to the cookie.`}</p>\n    <p>{`The `}<inlineCode parentName=\"p\">{`AMCV_###@AdobeOrg`}</inlineCode>{` first-party cookie is always set by the Experience Cloud ID Service, although the `}<inlineCode parentName=\"p\">{`ECID`}</inlineCode>{` is passed in Target requests.`}</p>\n    <h3 {...{\n      \"id\": \"third-party-cookies-and-cross-domain-tracking-is-not-supported\"\n    }}>{`Third-party cookies and cross domain tracking is not supported`}</h3>\n    <p>{`Cross-domain tracking makes it possible to see sessions on two related sites, but with different domains, as a single session. You could create a Target activity that spans `}<inlineCode parentName=\"p\">{`siteA.com`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`siteB.com`}</inlineCode>{` and the visitor would remain in the same experience when they crossed domains. This functionality ties into at.js 1.`}<em parentName=\"p\">{`x`}</em>{` third-party and first-party cookie behavior.`}</p>\n    <p>{`In at.js 1.`}<em parentName=\"p\">{`x`}</em>{`, the third-party cookie was stored in the `}<inlineCode parentName=\"p\">{`[CLIENTCODE].tt.omtrdc.net`}</inlineCode>{` domain and the first-party cookie was stored in `}<inlineCode parentName=\"p\">{`clientdomain.com`}</inlineCode>{`. The first request returned HTTP response headers that attempted to set third-party cookies named `}<inlineCode parentName=\"p\">{`mboxSession`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`mboxPC`}</inlineCode>{`, whereas a redirect request is sent back with an extra parameter (`}<inlineCode parentName=\"p\">{`mboxXDomainCheck=true`}</inlineCode>{`). If the browser accepted third-party cookies, the redirect request includes those cookies, and the offer was returned. This workflow was possible because at.js 1.`}<em parentName=\"p\">{`x`}</em>{` used the HTTP GET method.`}</p>\n    <p>{`However, in at.js 2.x, HTTP GET is no longer used and instead uses HTTP POST. HTTP POST is now used via at.js in order to send JSON payloads to Target edge servers instead of key-value parameters. This means that the redirect request to check whether a browser supports third-party cookies now breaks. This is because HTTP GET requests are idempotent transactions while HTTP POST is non-idempotent and mustn’t be arbitrarily repeated.`}</p>\n    <p>{`Therefore, neither third-party cookies nor cross-domain tracking are supported in at.js 2.0.0.`}</p>\n    <h2 {...{\n      \"id\": \"atjs-1x-cookie-behavior\"\n    }}>{`at.js 1.`}<em parentName=\"h2\">{`x`}</em>{` cookie behavior`}</h2>\n    <p>{`For at.js versions 1.`}<em parentName=\"p\">{`x`}</em>{`, the cookie behavior depends on whether it is a first-party cookie, a third-party cookie with a first-party cookie, or a third-party cookie alone.`}</p>\n    <h3 {...{\n      \"id\": \"when-to-use-first-party-or-third-party-cookies\"\n    }}>{`When to use first-party or third-party cookies`}</h3>\n    <p>{`Your site setup determines which cookies you want to use. It is helpful to understand how Target works when trying to understand first-party and third-party cookies. See `}<a parentName=\"p\" {...{\n        \"href\": \"https://experienceleague.corp.adobe.com/docs/target/using/introduction/how-target-works.html\"\n      }}>{`How Adobe Target works`}</a>{` for more information.`}</p>\n    <p>{`There are three main use cases for cookies:`}</p>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`One domain.`}</p>\n        <p parentName=\"li\">{`All of your testing will take place within one top-level domain (`}<inlineCode parentName=\"p\">{`www.domain.com`}</inlineCode>{`, `}<inlineCode parentName=\"p\">{`store.domain.com`}</inlineCode>{`, `}<inlineCode parentName=\"p\">{`anysub.domain.com`}</inlineCode>{`, etc.).`}</p>\n        <p parentName=\"li\">{`Use only first-party cookies. This is the default.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Users cross domains and you want to track and test their behavior across these domains.`}</p>\n        <p parentName=\"li\">{`Example: A user comes to your site to shop but checks out through Yahoo stores. Three approaches (work with your account representative to determine the best approach):`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">\n            <p parentName=\"li\">{`Enable first- and third-party cookies.`}</p>\n          </li>\n          <li parentName=\"ul\">\n            <p parentName=\"li\">{`Enable third-party only (very rare, but has the benefit of keeping the at.js cookie out of your domain).`}</p>\n          </li>\n          <li parentName=\"ul\">\n            <p parentName=\"li\">{`Enable only first-party cookies and pass `}<inlineCode parentName=\"p\">{`mboxSession`}</inlineCode>{` parameter when crossing domain.`}</p>\n            <p parentName=\"li\">{`The `}<inlineCode parentName=\"p\">{`mboxSession`}</inlineCode>{` parameter must be passed to a landing page with at.js referenced. It cannot be an intermediate redirector page.`}</p>\n          </li>\n        </ul>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`You are using only adboxes or Flashboxes on a third-party site.`}</p>\n        <p parentName=\"li\">{`Two approaches (work with your client services manager to determine the best approach):`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">\n            <p parentName=\"li\">{`Enable first-party and third-party cookies.`}</p>\n            <p parentName=\"li\">{`First-party and third-party cookies are required for Flashbox and dynamic creatives.`}</p>\n          </li>\n          <li parentName=\"ul\">\n            <p parentName=\"li\">{`Enable only third-party cookies.`}</p>\n            <p parentName=\"li\">{`This approach is only for the rare case where adBox implementations are used without on-site targeting.`}</p>\n          </li>\n        </ul>\n      </li>\n    </ol>\n    <h3 {...{\n      \"id\": \"first-party-cookie-behavior\"\n    }}>{`First-party cookie behavior`}</h3>\n    <p>{`The first-party cookie is stored in `}<inlineCode parentName=\"p\">{`clientdomain.com`}</inlineCode>{`, where `}<inlineCode parentName=\"p\">{`clientdomain`}</inlineCode>{` is your domain.`}</p>\n    <p>{`at.js generates an `}<inlineCode parentName=\"p\">{`mboxSession ID`}</inlineCode>{` and stores it in the cookie. The first response contains the offer, as well as the JavaScript to store the `}<inlineCode parentName=\"p\">{`mboxPC ID`}</inlineCode>{` generated by the application, in the cookie.`}</p>\n    <InlineAlert variant=\"info\" slots=\"text\" mdxType=\"InlineAlert\" />\n    <p>{`The `}<inlineCode parentName=\"p\">{`AMCV_###@AdobeOrg`}</inlineCode>{` first-party cookie is always set with the Experience Cloud Visitor ID.`}</p>\n    <h3 {...{\n      \"id\": \"third-party-cookie-behavior\"\n    }}>{`Third-party cookie behavior`}</h3>\n    <p>{`The third-party cookie is stored in `}<inlineCode parentName=\"p\">{`clientcode.tt.omtrdc.net`}</inlineCode>{` and the first-party cookie is stored in `}<inlineCode parentName=\"p\">{`clientdomain.com`}</inlineCode>{`, where `}<inlineCode parentName=\"p\">{`clientdomain`}</inlineCode>{` is your domain.`}</p>\n    <p>{`at.js generates an `}<inlineCode parentName=\"p\">{`mboxSession ID`}</inlineCode>{`. The first location request returns HTTP response headers that attempt to set third-party cookies named `}<inlineCode parentName=\"p\">{`mboxSession`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`mboxPC`}</inlineCode>{` and a redirect request is sent back with an extra parameter (`}<inlineCode parentName=\"p\">{`mboxXDomainCheck=true`}</inlineCode>{`).`}</p>\n    <p>{`If the browser accepts third-party cookies, the redirect request includes those cookies, and the offer is returned.`}</p>\n    <p>{`If the browser rejects third-party cookies, the redirect request does not include those cookies, and default content is displayed for all locations on the page. Because there are no cookies set, the same process above happens again on every page request.`}</p>\n    <h3 {...{\n      \"id\": \"third-party-and-first-party-cookie-behavior\"\n    }}>{`Third-party and first-party cookie behavior`}</h3>\n    <p>{`The third-party cookie is stored in `}<inlineCode parentName=\"p\">{`clientcode.tt.omtrdc.net`}</inlineCode>{` and the first-party cookie is stored in `}<inlineCode parentName=\"p\">{`clientdomain.com`}</inlineCode>{`, where `}<inlineCode parentName=\"p\">{`clientdomain`}</inlineCode>{` is your domain.`}</p>\n    <p>{`at.js generates an `}<inlineCode parentName=\"p\">{`mboxSession ID`}</inlineCode>{`. The first location request returns HTTP response headers that attempt to set third-party cookies named `}<inlineCode parentName=\"p\">{`mboxSession`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`mboxPC`}</inlineCode>{`, and a redirect request is sent back with an extra parameter (`}<inlineCode parentName=\"p\">{`mboxXDomainCheck=true`}</inlineCode>{`).`}</p>\n    <p>{`If the browser accepts third-party cookies, the redirect request includes those cookies, and the offer is returned.`}</p>\n    <p>{`Some browsers reject third-party cookies. If the third-party cookie is blocked, the first-party cookie still works. Target attempts to set the third-party cookie, and if it cannot, then Target can only track on the client's specific domain. Cross-domain tracking does not work if the third-party is blocked, unless the `}<inlineCode parentName=\"p\">{`mboxSession`}</inlineCode>{` is appended in the link that crosses domains. In this case, another first-party cookie is set and synched with the prior domain's first-party cookie.`}</p>\n    <h2 {...{\n      \"id\": \"cookie-settings\"\n    }}>{`Cookie settings`}</h2>\n    <p>{`The cookie has several default settings. You can change these settings if needed, with the exception of the cookie duration. Consult your account representative when changing cookie settings.`}</p>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Setting`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Information`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Cookie name`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`mbox.`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Cookie domain`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`The second and top levels of the domains from which you serve the content. Because it is served from your company's domain, the cookie is a first party cookie. Example: `}<inlineCode parentName=\"td\">{`mycompany.com`}</inlineCode>{`.`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Server domain`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`clientcode.tt.omtrdc.net`}</inlineCode>{`, using the client code for your account.`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Cookie duration`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`The cookie remains on the visitor's browser two years from his or her last login.`}<br />{`The `}<inlineCode parentName=\"td\">{`deviceIdLifetime`}</inlineCode>{` setting is overrideable in `}<a parentName=\"td\" {...{\n              \"href\": \"/target-developers/help/c-implementing-target/c-implementing-target-for-client-side-web/target-atjs-versions.md\"\n            }}>{`at.js version 2.3.1 or later`}</a>{`. For more information, see `}<a parentName=\"td\" {...{\n              \"href\": \"/target-developers/help/c-implementing-target/c-implementing-target-for-client-side-web/targetgobalsettings.md\"\n            }}>{`targetGlobalSettings()`}</a>{`.`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`P3P policy`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`The cookie is published with a P3P policy, as required by the default setting in most browsers. A P3P policy indicates to a browser who is serving the cookie and how the information will be used.`}</td>\n        </tr>\n      </tbody>\n    </table>\n    <p>{`The cookie keeps a number of values to manage how your visitors experience campaigns:`}</p>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Value`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Definition`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`session ID`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`A unique ID for a user session. By default, this lasts 30 minutes.`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`pc ID`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`A semi-permanent ID for a visitor's browser. Lasts 14 days.`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`check`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`A simple test value used to determine if a visitor supports cookies. Set each time a visitor requests a page.`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`disable`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Set if visitor's load time exceeds the timeout configured in the Adobe Experience Platform Web SDK or at.js file. By default, this lasts 1 hour.`}</td>\n        </tr>\n      </tbody>\n    </table>\n    <h2 {...{\n      \"id\": \"impact-on-target-for-safari-visitors-due-to-apple-webkit-tracking-changes\"\n    }}>{`Impact on Target for Safari visitors due to Apple WebKit tracking changes`}</h2>\n    <p>{`Keep the following in mind:`}</p>\n    <h3 {...{\n      \"id\": \"how-does-adobe-target-tracking-work\"\n    }}>{`How does Adobe Target Tracking work?`}</h3>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Cookies`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Details`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`First-party domains`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`This is the standard implementation for Target customers.  The \"mbox\" cookies is set in the customer's domain.`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Third-party tracking`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Third-party tracking is important for advertising and targeting use cases in Target and in Adobe Audience Manager (AAM).  Third-party tracking requires cross-site scripting techniques.  Target uses two cookies, \"mboxSession\" and \"mboxPC\" set in the `}<inlineCode parentName=\"td\">{`clientcode.tt.omtrd.net`}</inlineCode>{` domain.`}</td>\n        </tr>\n      </tbody>\n    </table>\n    <h3 {...{\n      \"id\": \"what-is-apples-approach\"\n    }}>{`What is Apple's approach?`}</h3>\n    <p>{`From Apple:`}</p>\n    <p>{`\"Intelligent Tracking Prevention is a new WebKit feature that reduces cross-site tracking by further limiting cookies and other website data.\"`}</p>\n    <p>{`\"This is what's called cross-site tracking and the cookie used by `}<inlineCode parentName=\"p\">{`example-tracker.com`}</inlineCode>{` is called a third-party cookie. In our testing we found popular websites with over 70 such trackers, all silently collecting data on users.\"`}</p>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Approach`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Details`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Intelligent tracking prevention`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`For more information, see `}<a parentName=\"td\" {...{\n              \"href\": \"https://webkit.org/blog/7675/intelligent-tracking-prevention/\"\n            }}>{`Intelligent Tracking Prevention`}</a>{` on the WebKit Open Source Web Browser Engine website.`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Cookies`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`How Safari handles cookies:`}<ul><li>{`Third-party cookies that are not on a domain the user accesses directly are never saved. This behavior is not new. Third-party cookies are already not supported in Safari.`}</li><li>{`Third-party cookies set on a domain the user accesses directly are purged after 24 hours.`}</li><li>{`First-party cookies are purged after 30 days if that first-party domain has been classified as tracking users across sites. This issue might apply to large companies that send users to different domains online. Apple has not made it clear how exactly these domains will be classified, or how a domain can determine if they've been classified as tracking users cross-site.`}</li></ul></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Machine Learning to identify domains that are cross-site`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`From Apple:`}<br />{`Machine Learning Classifier: A machine learning model is used to classify which top privately-controlled domains have the ability to track the user cross-site, based on the collected statistics. Out of the various statistics collected, three vectors turned out to have strong signal for classification based on current tracking practices: subresource under number of unique domains, sub frame under number of unique domains, and number of unique domains redirected to. All data collection and classification happens on-device.`}<br />{`However, if the user interacts with  example.com as the top domain, often referred to as a first-party domain, Intelligent Tracking Prevention considers it a signal that the user is interested in the website and temporarily adjusts its behavior as depicted in this timeline:`}<br />{`If the user interacted with  example.com the last 24 hours, its cookies will be available when `}<inlineCode parentName=\"td\">{`example.com`}</inlineCode>{` is a third-party. This allows for \"Sign in with my X account on Y\" login scenarios.`}<ul><li>{`Domains that are visited as top level domain won't be affected. Sites like OKTA for example`}</li><li>{`Identifies domains that are sub domain or sub frame of current page across multiple unique domains.`}</li></ul></td>\n        </tr>\n      </tbody>\n    </table>\n    <h3 {...{\n      \"id\": \"how-will-adobe-be-affected\"\n    }}>{`How will Adobe be affected?`}</h3>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Affected Functionality`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Details`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Opt-out support`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Apple's WebKit tracking changes breaks opt-out support.`}<br />{`Target opt-out uses a cookie in the `}<inlineCode parentName=\"td\">{`clientcode.tt.omtrdc.net`}</inlineCode>{` domain. For more details, see `}<a parentName=\"td\" {...{\n              \"href\": \"/target-developers/before-implement/privacy/privacy.md\"\n            }}>{`Privacy`}</a>{`.`}<br />{`Target supports two opt-outs:`}<ul><li>{`One per client (the client manages the opt-out link).`}</li><li>{`One via Adobe that opts the user out of all Target functionality for all customers.`}</li></ul>{`Both methods use the third-party cookie.`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Target activities`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Customers can choose their `}<a parentName=\"td\" {...{\n              \"href\": \"https://experienceleague.corp.adobe.com/docs/target/using/audiences/visitor-profiles/visitor-profile-lifetime.html\"\n            }}>{`profile lifetime length`}</a>{` for their Target accounts—up to 90 days. The concern is that if the account's profile lifetime is longer than 30 days, and the first-party cookie gets purged because the customer's domain has been marked as tracking users cross-site, behavior for Safari visitors will be affected in the following areas in Target:`}<br /><strong parentName=\"td\">{`Target Reports`}</strong>{`: If a Safari user enters into an activity, returns after 30 days, and then converts, that user counts as two visitors and one conversion.`}<br />{`This behavior is the same for activities using Analytics as the reporting source (A4T).`}<br /><strong parentName=\"td\">{`Profile & Activity Membership`}</strong>{`:`}<ul><li>{`Profile data is erased when the first-party cookie expires.`}</li><li>{`Activity membership is erased when the first-party cookie expires.`}</li><li>{` Target does not function in Safari for accounts using a third-party cookie implementation or a first- and third-party cookie implementation. Note that this behavior is not new. Safari has not allowed third-party cookies for awhile.`}</li></ul><br /><strong parentName=\"td\">{`Suggestions`}</strong>{`: If there is a concern that the customer domain might be marked as one tracking visitors cross-session, it's safest to set the profile lifetime to 30 days or fewer in Target. This ensures that users will be tracked similarly in Safari and all other browsers.`}</td>\n        </tr>\n      </tbody>\n    </table>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}