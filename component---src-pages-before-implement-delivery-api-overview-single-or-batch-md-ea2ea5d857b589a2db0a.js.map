{"version":3,"file":"component---src-pages-before-implement-delivery-api-overview-single-or-batch-md-ea2ea5d857b589a2db0a.js","mappings":"wRAQaA,EAAe,CAAC,EACvBC,EAAc,CAClBD,aAAAA,GAEIE,EAAYC,EAAAA,EACH,SAASC,EAAT,GAGZ,IAFDC,EAEC,EAFDA,WACGC,GACF,YACD,OAAO,SAACJ,GAAD,UAAeD,EAAiBK,EAAhC,CAAuCD,WAAYA,EAAYE,QAAQ,eAG5E,eACE,GAAM,4BADR,6BAGA,2dACA,eACE,GAAM,wBADR,yBAGA,oZACA,qBAAK,iBAAMC,WAAW,OAAjB,2pBAgCL,yHAA0G,uBAAYA,WAAW,KAAvB,SAA1G,MAAiK,uBAAYA,WAAW,KAAvB,yBAAjK,YAA8O,uBAAYA,WAAW,KAAvB,QAA9O,KAAmS,uBAAYA,WAAW,KAAvB,eAAnS,yFACA,qBAAK,iBAAMA,WAAW,OAAjB,4jBAwBL,gDAAiC,uBAAYA,WAAW,KAAvB,WAAjC,yIACA,eACE,GAAM,qBADR,sBAGA,+LAAgL,uBAAYA,WAAW,KAAvB,YAAhL,YAAgP,uBAAYA,WAAW,KAAvB,WAAhP,iEACA,qBAAK,iBAAMA,WAAW,OAAjB,umBA0BL,mGAAoF,uBAAYA,WAAW,KAAvB,oDAApF,YACA,qBAAK,iBAAMA,WAAW,OAAjB,u4CAkCL,6BAAc,uBAAYA,WAAW,KAAvB,WAAd,8JAA+N,eAAIA,WAAW,KAAf,iBAA/N,MACA,eACE,GAAM,yBADR,0BAGA,uRACA,qBAAK,iBAAMA,WAAW,OAAjB,6zBAwCL,yHAA0G,uBAAYA,WAAW,KAAvB,SAA1G,MAAiK,uBAAYA,WAAW,KAAvB,yBAAjK,kBAAoP,uBAAYA,WAAW,KAAvB,QAApP,KAAyS,uBAAYA,WAAW,KAAvB,eAAzS,MAAsW,uBAAYA,WAAW,KAAvB,oBAAtW,UAA4a,uBAAYA,WAAW,KAAvB,oBAA5a,2LACA,qBAAK,iBAAMA,WAAW,OAAjB,0sCA6CL,yEAA0D,uBAAYA,WAAW,KAAvB,WAA1D,oHAGH,CAEDJ,EAAWK,gBAAiB,C","sources":["webpack://target-developers/./src/pages/before-implement/delivery-api-overview/single-or-batch.md"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/target-developers/target-developers/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"single-or-batch-delivery\"\n    }}>{`Single or Batch Delivery`}</h1>\n    <p>{`The Adobe Target Delivery API supports a single or batch delivery call. One can make a server request for content for single or multiple mboxes. Please make sure to outweigh the performance costs when making a single call vs a batched call. If you know all of the content that needs to be shown for a user, it is best practice to retrieve content for all mboxes with a single batch delivery call so that you avoid making multiple single delivery calls.`}</p>\n    <h2 {...{\n      \"id\": \"single-delivery-call\"\n    }}>{`Single Delivery Call`}</h2>\n    <p>{`You can retrieve an experience to display to the user for one mbox via the Adobe Target Delivery API. Note that if you are making a single delivery call, you would need to initiate another server call to retrieve additional content for an mbox for a user. This can become very costly over time, so please make sure to evaluate your approach when using the single Delivery API call.`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`curl -X POST \\\\\n'https://demo.tt.omtrdc.net/rest/v1/delivery?client=demo&sessionId=7abf6304b2714215b1fd39a870f01afc#1555632114' \\\\\n-H 'Content-Type: application/json' \\\\\n-H 'cache-control: no-cache' \\\\\n-d '\n{\n  \"id\": {\n    \"tntId\": \"abcdefghijkl00023.1_1\"\n  },\n  \"context\": {\n    \"channel\": \"web\",\n    \"browser\" : {\n      \"host\" : \"demo\"\n    },\n    \"address\" : {\n      \"url\" : \"http://demo.dev.tt-demo.com/demo/store/index.html\"\n    },\n    \"screen\" : {\n      \"width\" : 1200,\n      \"height\": 1400\n    }\n  },\n    \"execute\": {\n    \"mboxes\" : [\n      {\n        \"name\" : \"SummerOffer\",\n        \"index\" : 1\n      }\n    ]\n  }\n}'\n`}</code></pre>\n    <p>{`In the single delivery call example above, the experience is retrieved to display to the user with `}<inlineCode parentName=\"p\">{`tntId`}</inlineCode>{`: `}<inlineCode parentName=\"p\">{`abcdefghijkl00023.1_1`}</inlineCode>{` for an `}<inlineCode parentName=\"p\">{`mbox`}</inlineCode>{`:`}<inlineCode parentName=\"p\">{`SummerOffer`}</inlineCode>{` on the web channel. This single delivery call will generate the following response:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`{\n  \"status\": 200,\n  \"requestId\": \"25e0cc42-3d7b-456a-8b49-af60c1fb23d9\",\n  \"client\": \"demo\",\n  \"id\": {\n      \"tntId\": \"abcdefghijkl00023.1_1\"\n  },\n  \"edgeHost\": \"mboxedge28.tt.omtrdc.net\",\n  \"execute\": {\n      \"mboxes\": [\n          {\n              \"index\": 1,\n              \"name\": \"SummerOffer\",\n              \"options\": [\n                  {\n                      \"content\": \"<p><b>Enjoy this 15% discount on your next purchase</b></p>\",\n                      \"type\": \"html\",\n                  }\n              ]\n          }\n      ]\n    }\n}\n`}</code></pre>\n    <p>{`In the response, note the `}<inlineCode parentName=\"p\">{`content`}</inlineCode>{` field contains the HTML that describes the experience to be shown to the user for the web that corresponds to the SummerOffer mbox.`}</p>\n    <h3 {...{\n      \"id\": \"execute-page-load\"\n    }}>{`Execute Page Load`}</h3>\n    <p>{`If there are experiences that should be shown when a page load happens in the web channel, such as AB testing the fonts located in the footer or header, you can specify `}<inlineCode parentName=\"p\">{`pageLoad`}</inlineCode>{` in the `}<inlineCode parentName=\"p\">{`execute`}</inlineCode>{` field to retrieve all modifications that should be applied.`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`curl -X POST \\\\\n  'https://demo.tt.omtrdc.net/rest/v1/delivery?client=demo&sessionId=d359570e04f14e1faeeba02d6ab9914e' \\\\\n  -H 'Content-Type: application/json' \\\\\n  -H 'cache-control: no-cache' \\\\\n  -d '{\n  \"id\": {\n    \"tntId\": \"84e8d0e211054f18af365d65f45e902b.28_131\"\n  },\n  \"context\": {\n    \"channel\": \"web\",\n    \"window\": {\n      \"width\": 1819,\n      \"height\": 842\n    },\n    \"browser\": {\n      \"host\": \"target.enablementadobe.com\"\n    },\n    \"address\": {\n      \"url\": \"https://target.enablementadobe.com/react/demo/#/\"\n    }\n  },\n  \"execute\": {\n    \"pageLoad\": {}\n  }\n}'\n`}</code></pre>\n    <p>{`The sample call above retrieves any experiences to show a user when the page `}<inlineCode parentName=\"p\">{`https://target.enablementadobe.com/react/demo/#/`}</inlineCode>{` loads.`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`{\n      \"status\": 200,\n      \"requestId\": \"355ebc47-edb6-481f-aeae-ae55d71afaca\",\n      \"client\": \"demo\",\n      \"id\": {\n          \"tntId\": \"84e8d0e211054f18af365d65f45e902b.28_131\"\n      },\n      \"edgeHost\": \"mboxedge28.tt.omtrdc.net\",\n      \"execute\": {\n          \"pageLoad\": {\n              \"options\": [\n                  {\n                      \"content\": [\n                          {\n                              \"type\": \"setHtml\",\n                              \"selector\": \"#app > DIV:nth-of-type(1) > DIV:nth-of-type(1) > NAV.nav:eq(0) > DIV.container:eq(0) > DIV.nav-right:eq(0) > A.nav-item:eq(0)\",\n                              \"cssSelector\": \"#app > DIV:nth-of-type(1) > DIV:nth-of-type(1) > NAV:nth-of-type(1) > DIV:nth-of-type(1) > DIV:nth-of-type(2) > A:nth-of-type(1)\",\n                              \"content\": \"Modified Home\"\n                          }\n                      ],\n                      \"type\": \"actions\"\n                  }\n              ],\n              \"metrics\": [\n                  {\n                      \"type\": \"click\",\n                      \"selector\": \"#app > DIV:nth-of-type(1) > DIV:nth-of-type(2) > SECTION.section:eq(0) > DIV.container:eq(0) > FORM.col-md-4:eq(0) > DIV.form-group:eq(0) > BUTTON.btn:eq(0)\",\n                      \"eventToken\": \"QPaLjCeI9qKCBUylkRQKBg==\"\n                  }\n              ]\n          }\n      }\n  }\n`}</code></pre>\n    <p>{`In the `}<inlineCode parentName=\"p\">{`content`}</inlineCode>{` field, the modification that needs to be applied on a page load can be retrieved. In the example above, note that a link on the header needs to be named `}<em parentName=\"p\">{`Modified Home`}</em>{`.`}</p>\n    <h2 {...{\n      \"id\": \"batched-delivery-call\"\n    }}>{`Batched Delivery Call`}</h2>\n    <p>{`Instead of making multiple delivery calls with a single mbox in each call, making one delivery call with a batch of mboxes can reduce unnecessary server calls. Invoking a server call should be minimized as much as possible in order to be highly performant.`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`curl -X POST \\\\\n'https://demo.tt.omtrdc.net/rest/v1/delivery?client=demo&sessionId=7abf6304b2714215b1fd39a870f01afc#1555632114' \\\\\n-H 'Content-Type: application/json' \\\\\n-H 'cache-control: no-cache' \\\\\n-d '\n{\n  \"id\": {\n    \"tntId\": \"abcdefghijkl00023.1_1\"\n  },\n  \"context\": {\n    \"channel\": \"web\",\n    \"browser\" : {\n      \"host\" : \"demo\"\n    },\n    \"address\" : {\n      \"url\" : \"http://demo.dev.tt-demo.com/demo/store/index.html\"\n    },\n    \"screen\" : {\n      \"width\" : 1200,\n      \"height\": 1400\n    }\n  },\n    \"execute\": {\n    \"mboxes\" : [\n      {\n        \"name\" : \"SummerOffer\",\n        \"index\" : 1\n      },\n      {\n        \"name\" : \"SummerShoesOffer\",\n        \"index\" : 2\n      },\n      {\n        \"name\" : \"SummerDressOffer\",\n        \"index\" : 3\n      }      \n    ]\n  }\n}'\n`}</code></pre>\n    <p>{`In the batched delivery call example above, experiences are retrieved to display for the user with `}<inlineCode parentName=\"p\">{`tntId`}</inlineCode>{`: `}<inlineCode parentName=\"p\">{`abcdefghijkl00023.1_1`}</inlineCode>{` for multiple `}<inlineCode parentName=\"p\">{`mbox`}</inlineCode>{`:`}<inlineCode parentName=\"p\">{`SummerOffer`}</inlineCode>{`, `}<inlineCode parentName=\"p\">{`SummerShoesOffer`}</inlineCode>{`, and `}<inlineCode parentName=\"p\">{`SummerDressOffer`}</inlineCode>{`. Since we know that we need to show an experience for multiple mboxes for this user, we can batch these requests and make one server call instead of three individual delivery calls.`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`{\n  \"status\": 200,\n  \"requestId\": \"fe15286f-effb-434f-85d8-c3db804075ce\",\n  \"client\": \"demo\",\n  \"id\": {\n      \"tntId\": \"abcdefghijkl00023.28_120\"\n  },\n  \"edgeHost\": \"mboxedge28.tt.omtrdc.net\",\n  \"execute\": {\n      \"mboxes\": [\n          {\n              \"index\": 1,\n              \"name\": \"SummerOffer\",\n              \"options\": [\n                  {\n                      \"content\": \"<p><b>Enjoy this 15% discount on your next purchase</b></p>\",\n                      \"type\": \"html\",\n\n                  }\n              ]\n          },\n          {\n              \"index\": 2,\n              \"name\": \"SummerShoesOffer\",\n              \"options\": [\n                  {\n                      \"content\": \"<p><b>Enjoy this 15% discount on your next shoe purchase</b></p>\",\n                      \"type\": \"html\",\n                  }\n              ]\n          },\n          {\n              \"index\": 3,\n              \"name\": \"SummerDressOffer\",\n              \"options\": [\n                  {\n                      \"content\": \"<p><b>Enjoy this 15% discount on your next dress purchase</b></p>\",\n                      \"type\": \"html\",\n                  }\n              ]\n          }\n      ]\n  }\n}\n`}</code></pre>\n    <p>{`In the response above, you can see that within the `}<inlineCode parentName=\"p\">{`content`}</inlineCode>{` field of each mbox, the HTML representation of the experience to show to the user for each mbox is retrievable.`}</p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent"],"sourceRoot":""}