"use strict";(self.webpackChunktarget_developers=self.webpackChunktarget_developers||[]).push([[9389],{63007:function(e,n,t){t.r(n),t.d(n,{_frontmatter:function(){return s},default:function(){return u}});var o=t(87462),i=t(63366),a=(t(15007),t(64983)),d=t(91515),r=["components"],s={},m=function(e){return function(n){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,a.mdx)("div",n)}},l=m("InlineAlert"),p=m("CodeBlock"),c={_frontmatter:s},x=d.Z;function u(e){var n=e.components,t=(0,i.Z)(e,r);return(0,a.mdx)(x,(0,o.Z)({},c,t,{components:n,mdxType:"MDXLayout"}),(0,a.mdx)("h1",{id:"send-notifications"},"Send Notifications"),(0,a.mdx)("h2",{id:"description"},"Description"),(0,a.mdx)("p",null,(0,a.mdx)("inlineCode",{parentName:"p"},"SendNotifications()")," is used to send display or click notifications to Adobe Target for measurement and reporting."),(0,a.mdx)(l,{variant:"info",slots:"text",mdxType:"InlineAlert"}),(0,a.mdx)("p",null,"When an ",(0,a.mdx)("inlineCode",{parentName:"p"},"Execute")," object with required params is within the request itself, the impression will be incremented automatically for qualifying activities."),(0,a.mdx)("p",null,"SDK methods that will increment an impression automatically are:"),(0,a.mdx)("ul",null,(0,a.mdx)("li",{parentName:"ul"},(0,a.mdx)("inlineCode",{parentName:"li"},"GetOffers()")),(0,a.mdx)("li",{parentName:"ul"},(0,a.mdx)("inlineCode",{parentName:"li"},"GetAttributes()"))),(0,a.mdx)("p",null,"When a ",(0,a.mdx)("inlineCode",{parentName:"p"},"Prefetch")," object is passed within the request, the impression is not automatically incremented for the activities with mboxes within the ",(0,a.mdx)("inlineCode",{parentName:"p"},"Prefetch")," object. ",(0,a.mdx)("inlineCode",{parentName:"p"},"SendNotifications()")," must be used for prefetched experiences for incrementing impressions and conversions."),(0,a.mdx)("h2",{id:"method"},"Method"),(0,a.mdx)(p,{slots:"heading, code",repeat:"1",languages:"dotnet",mdxType:"CodeBlock"}),(0,a.mdx)("h3",{id:"create"},"Create"),(0,a.mdx)("pre",null,(0,a.mdx)("code",{parentName:"pre",className:"language-dotnet"},"TargetDeliveryResponse TargetClient.SendNotifications(TargetDeliveryRequest request)\n")),(0,a.mdx)("h2",{id:"example"},"Example"),(0,a.mdx)("p",null,"First, let's build the Target Delivery API request for prefetching content for the ",(0,a.mdx)("inlineCode",{parentName:"p"},"home")," and ",(0,a.mdx)("inlineCode",{parentName:"p"},"product1")," mboxes."),(0,a.mdx)(p,{slots:"heading, code",repeat:"1",languages:"dotnet",mdxType:"CodeBlock"}),(0,a.mdx)("h3",{id:"net"},".","NET"),(0,a.mdx)("pre",null,(0,a.mdx)("code",{parentName:"pre",className:"language-dotnet"},'var mboxRequests = new List<MboxRequest>\n    {\n        new (index: 1, name: "home"),\n        new (index: 2, name: "product1"),\n    };\n\nvar targetDeliveryRequest = new TargetDeliveryRequest.Builder()\n    .SetPrefetch(new PrefetchRequest(mboxes: mboxRequests))\n    .Build();\n\n// Next, we fetch the offers via Target .NET SDK GetOffers() API\nvar targetResponse = targetClient.GetOffers(targetDeliveryRequest);\n')),(0,a.mdx)("p",null,"A successful response will contain a Target Delivery API response object, which contains prefetched content for the requested mboxes. A sample ",(0,a.mdx)("inlineCode",{parentName:"p"},"targetResponse.Response")," object may appear as follows:"),(0,a.mdx)(p,{slots:"heading, code",repeat:"1",languages:"dotnet",mdxType:"CodeBlock"}),(0,a.mdx)("h3",{id:"net-1"},".","NET"),(0,a.mdx)("pre",null,(0,a.mdx)("code",{parentName:"pre",className:"language-dotnet"},'{\n  "status": 200,\n  "requestId": "e8ac2dbf5f7d4a9f9280f6071f24a01e",\n  "id": {\n    "tntId": "08210e2d751a44779b8313e2d2692b96.21_27"\n  },\n  "client": "adobetargetmobile",\n  "edgeHost": "mboxedge21.tt.omtrdc.net",\n  "prefetch": {\n    "mboxes": [\n      {\n        "index": 0,\n        "name": "home",\n        "options": [\n          {\n            "type": "html",\n            "content": "HOME OFFER",\n            "eventToken": "t0FRvoWosOqHmYL5G18QCZNWHtnQtQrJfmRrQugEa2qCnQ9Y9OaLL2gsdrWQTvE54PwSz67rmXWmSnkXpSSS2Q==",\n            "responseTokens": {\n              "profile.memberlevel": "0",\n              "geo.city": "dublin",\n              "activity.id": "302740",\n              "experience.name": "Experience B",\n              "geo.country": "ireland"\n            }\n          }\n        ],\n        "state": "J+W1Fq18hxliDDJonTPfV0S+mzxapAO3d14M43EsM9f12A6QaqL+E3XKkRFlmq9U"\n      },\n      {\n        "index": 1,\n        "name": "product1",\n        "options": [\n          {\n            "type": "html",\n            "content": "TEST OFFER 1",\n            "eventToken": "t0FRvoWosOqHmYL5G18QCZNWHtnQtQrJfmRrQugEa2qCnQ9Y9OaLL2gsdrWQTvE54PwSz67rmXWmSnkXpSSS2Q==",\n            "responseTokens": {\n              "profile.memberlevel": "0",\n              "geo.city": "dublin",\n              "activity.id": "302740",\n              "experience.name": "Experience B",\n              "geo.country": "ireland"\n            }\n          }\n        ],\n        "state": "J+W1Fq18hxliDDJonTPfV0S+mzxapAO3d14M43EsM9f12A6QaqL+E3XKkRFlmq9U"\n      }\n    ]\n  }\n}\n')),(0,a.mdx)("p",null,"Note the ",(0,a.mdx)("inlineCode",{parentName:"p"},"mbox")," name and ",(0,a.mdx)("inlineCode",{parentName:"p"},"state")," fields, as well as the ",(0,a.mdx)("inlineCode",{parentName:"p"},"eventToken")," field, in each of the Target content options. These should be provided in the ",(0,a.mdx)("inlineCode",{parentName:"p"},"SendNotifications()")," request, as soon as each content option is displayed. Let's suppose the ",(0,a.mdx)("inlineCode",{parentName:"p"},"product1")," mbox has been displayed on a non-browser device. The notifications request will appear as follows:"),(0,a.mdx)(p,{slots:"heading, code",repeat:"1",languages:"dotnet",mdxType:"CodeBlock"}),(0,a.mdx)("h3",{id:"net-2"},".","NET"),(0,a.mdx)("pre",null,(0,a.mdx)("code",{parentName:"pre",className:"language-dotnet"},'var mboxNotifications = new List<Notification>\n{\n    new (id: "1", type: MetricType.Display, timestamp: DateTimeOffset.UtcNow.ToUnixTimeMilliseconds(),\n        mbox: new NotificationMbox("product1", "J+W1Fq18hxliDDJonTPfV0S+mzxapAO3d14M43EsM9f12A6QaqL+E3XKkRFlmq9U"),\n        tokens: new List<string> { "t0FRvoWosOqHmYL5G18QCZNWHtnQtQrJfmRrQugEa2qCnQ9Y9OaLL2gsdrWQTvE54PwSz67rmXWmSnkXpSSS2Q==" })\n}; \n\nvar mboxNotificationRequest = new TargetDeliveryRequest.Builder()\n    .SetNotifications(mboxNotifications)\n    .Build();\n')),(0,a.mdx)("p",null,"Notice we have included both the mbox state and the event token corresponding to the Target offer delivered in the prefetch response. Having built the notifications request, we can send it to Target via the ",(0,a.mdx)("inlineCode",{parentName:"p"},"SendNotifications()")," API method:"),(0,a.mdx)(p,{slots:"heading, code",repeat:"1",languages:"dotnet",mdxType:"CodeBlock"}),(0,a.mdx)("h3",{id:"net-3"},".","NET"),(0,a.mdx)("pre",null,(0,a.mdx)("code",{parentName:"pre",className:"language-dotnet"},"var notificationResponse = targetClient.SendNotifications(mboxNotificationRequest);\n")))}u.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-implement-server-side-net-send-notifications-md-1caff65cb1c2871e820c.js.map