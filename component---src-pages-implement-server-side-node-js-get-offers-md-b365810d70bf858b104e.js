(self.webpackChunkdev_site_documentation_template=self.webpackChunkdev_site_documentation_template||[]).push([[516],{11967:function(e,t,a){"use strict";a.r(t),a.d(t,{_frontmatter:function(){return o},default:function(){return u}});var n,r=a(22122),d=a(19756),l=(a(15007),a(64983)),m=a(99536),i=["components"],o={},p=(n="CodeBlock",function(e){return console.warn("Component "+n+" was not imported, exported, or provided by MDXProvider as global scope"),(0,l.mdx)("div",e)}),x={_frontmatter:o},s=m.Z;function u(e){var t=e.components,a=(0,d.Z)(e,i);return(0,l.mdx)(s,(0,r.Z)({},x,a,{components:t,mdxType:"MDXLayout"}),(0,l.mdx)("h1",{id:"get-offers"},"Get Offers"),(0,l.mdx)("h2",{id:"description"},"Description"),(0,l.mdx)("p",null,(0,l.mdx)("inlineCode",{parentName:"p"},"getOffers()")," is used to execute a decision and retrieve an experience from Adobe Target."),(0,l.mdx)("h2",{id:"method"},"Method"),(0,l.mdx)(p,{slots:"heading, code",repeat:"1",languages:"js",mdxType:"CodeBlock"}),(0,l.mdx)("h3",{id:"getoffers"},"getOffers"),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-js"},"TargetClient.getOffers(options: Object): Promise\n")),(0,l.mdx)("h2",{id:"parameters"},"Parameters"),(0,l.mdx)("p",null,"The ",(0,l.mdx)("inlineCode",{parentName:"p"},"options")," object has the following structure:"),(0,l.mdx)("table",null,(0,l.mdx)("thead",{parentName:"table"},(0,l.mdx)("tr",{parentName:"thead"},(0,l.mdx)("th",{parentName:"tr",align:null},"Name"),(0,l.mdx)("th",{parentName:"tr",align:null},"Type"),(0,l.mdx)("th",{parentName:"tr",align:null},"Required"),(0,l.mdx)("th",{parentName:"tr",align:null},"Default"),(0,l.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,l.mdx)("tbody",{parentName:"table"},(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"Request"),(0,l.mdx)("td",{parentName:"tr",align:null},"Object"),(0,l.mdx)("td",{parentName:"tr",align:null},"Yes"),(0,l.mdx)("td",{parentName:"tr",align:null},"None"),(0,l.mdx)("td",{parentName:"tr",align:null},"Conforms to the ",(0,l.mdx)("a",{parentName:"td",href:"../../api/delivery-api/index.md"},"Target Delivery API")," request")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"visitorCookie"),(0,l.mdx)("td",{parentName:"tr",align:null},"String"),(0,l.mdx)("td",{parentName:"tr",align:null},"No"),(0,l.mdx)("td",{parentName:"tr",align:null},"None"),(0,l.mdx)("td",{parentName:"tr",align:null},"ECID (VisitorId) cookie")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"targetCookie"),(0,l.mdx)("td",{parentName:"tr",align:null},"String"),(0,l.mdx)("td",{parentName:"tr",align:null},"No"),(0,l.mdx)("td",{parentName:"tr",align:null},"None"),(0,l.mdx)("td",{parentName:"tr",align:null},"Target cookie")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"targetLocationHint"),(0,l.mdx)("td",{parentName:"tr",align:null},"String"),(0,l.mdx)("td",{parentName:"tr",align:null},"No"),(0,l.mdx)("td",{parentName:"tr",align:null},"None"),(0,l.mdx)("td",{parentName:"tr",align:null},"Target location hint")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"consumerId"),(0,l.mdx)("td",{parentName:"tr",align:null},"Sting"),(0,l.mdx)("td",{parentName:"tr",align:null},"No"),(0,l.mdx)("td",{parentName:"tr",align:null},"None"),(0,l.mdx)("td",{parentName:"tr",align:null},"consumerIds for Analytics for Target (A4T) stitching")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"CustomerIds"),(0,l.mdx)("td",{parentName:"tr",align:null},"Array"),(0,l.mdx)("td",{parentName:"tr",align:null},"No"),(0,l.mdx)("td",{parentName:"tr",align:null},"None"),(0,l.mdx)("td",{parentName:"tr",align:null},"Customer IDs in VisitorId-compatible format")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"sessionId"),(0,l.mdx)("td",{parentName:"tr",align:null},"String"),(0,l.mdx)("td",{parentName:"tr",align:null},"No"),(0,l.mdx)("td",{parentName:"tr",align:null},"None"),(0,l.mdx)("td",{parentName:"tr",align:null},"Used for linking multiple Target requests")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"visitor"),(0,l.mdx)("td",{parentName:"tr",align:null},"Object"),(0,l.mdx)("td",{parentName:"tr",align:null},"No"),(0,l.mdx)("td",{parentName:"tr",align:null},"new VisitorId"),(0,l.mdx)("td",{parentName:"tr",align:null},"Supply an external VisitorId instance")))),(0,l.mdx)("h2",{id:"promise"},"Promise"),(0,l.mdx)("p",null,(0,l.mdx)("inlineCode",{parentName:"p"},"Promise")," returned has the following structure:"),(0,l.mdx)("table",null,(0,l.mdx)("thead",{parentName:"table"},(0,l.mdx)("tr",{parentName:"thead"},(0,l.mdx)("th",{parentName:"tr",align:null},"Name"),(0,l.mdx)("th",{parentName:"tr",align:null},"Type"),(0,l.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,l.mdx)("tbody",{parentName:"table"},(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"request"),(0,l.mdx)("td",{parentName:"tr",align:null},"Object"),(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("a",{parentName:"td",href:"../../api/delivery-api/index.md"},"Target Delivery API")," request")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"response"),(0,l.mdx)("td",{parentName:"tr",align:null},"Object"),(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("a",{parentName:"td",href:"../../api/delivery-api/index.md"},"Target Delivery API")," response")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"visitorState"),(0,l.mdx)("td",{parentName:"tr",align:null},"Object"),(0,l.mdx)("td",{parentName:"tr",align:null},"Object that should be passed to Visitor API ",(0,l.mdx)("inlineCode",{parentName:"td"},"getInstance()"))),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"targetCookie"),(0,l.mdx)("td",{parentName:"tr",align:null},"Object"),(0,l.mdx)("td",{parentName:"tr",align:null},"Target cookie")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"targetLocationHintCookie"),(0,l.mdx)("td",{parentName:"tr",align:null},"Object"),(0,l.mdx)("td",{parentName:"tr",align:null},"Target location hint cookie")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"analyticsDetails"),(0,l.mdx)("td",{parentName:"tr",align:null},"Array"),(0,l.mdx)("td",{parentName:"tr",align:null},"Analytics payload, in case of client-side Analytics usage")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"responseTokens"),(0,l.mdx)("td",{parentName:"tr",align:null},"Array"),(0,l.mdx)("td",{parentName:"tr",align:null},"A list of ",(0,l.mdx)("a",{parentName:"td",href:"https://experienceleague.adobe.com/docs/target/using/administer/response-tokens.html?lang=en"},"Response tokens"),".")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"trace"),(0,l.mdx)("td",{parentName:"tr",align:null},"Array"),(0,l.mdx)("td",{parentName:"tr",align:null},"Aggregated trace data for all request mboxes/views")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"status"),(0,l.mdx)("td",{parentName:"tr",align:null},"Object"),(0,l.mdx)("td",{parentName:"tr",align:null},"An object containing the status of the response.")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"decisioningMethod"),(0,l.mdx)("td",{parentName:"tr",align:null},"String"),(0,l.mdx)("td",{parentName:"tr",align:null},"Determines which decisioning method to use (",(0,l.mdx)("a",{parentName:"td",href:"../../sdk-guides/on-device-decisioning/index.md"},"on-device"),", server-side, hybrid)")))),(0,l.mdx)("p",null,(0,l.mdx)("inlineCode",{parentName:"p"},"targetCookie")," and ",(0,l.mdx)("inlineCode",{parentName:"p"},"targetLocationHintCookie")," objects used for passing data back to the browser have the following structure:"),(0,l.mdx)("table",null,(0,l.mdx)("thead",{parentName:"table"},(0,l.mdx)("tr",{parentName:"thead"},(0,l.mdx)("th",{parentName:"tr",align:null},"Name"),(0,l.mdx)("th",{parentName:"tr",align:null},"Type"),(0,l.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,l.mdx)("tbody",{parentName:"table"},(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"name"),(0,l.mdx)("td",{parentName:"tr",align:null},"String"),(0,l.mdx)("td",{parentName:"tr",align:null},"Cookie name")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"value"),(0,l.mdx)("td",{parentName:"tr",align:null},"Any"),(0,l.mdx)("td",{parentName:"tr",align:null},"Cookie value, the will be converted to string")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"maxAge"),(0,l.mdx)("td",{parentName:"tr",align:null},"Number"),(0,l.mdx)("td",{parentName:"tr",align:null},"The ",(0,l.mdx)("inlineCode",{parentName:"td"},"maxAge")," option is a convenience for setting expires relative to the current time in seconds")))),(0,l.mdx)("p",null,"The ",(0,l.mdx)("inlineCode",{parentName:"p"},"status")," object used for indicating the status of the target response has the following structure:"),(0,l.mdx)("table",null,(0,l.mdx)("thead",{parentName:"table"},(0,l.mdx)("tr",{parentName:"thead"},(0,l.mdx)("th",{parentName:"tr",align:null},"Name"),(0,l.mdx)("th",{parentName:"tr",align:null},"Type"),(0,l.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,l.mdx)("tbody",{parentName:"table"},(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"status"),(0,l.mdx)("td",{parentName:"tr",align:null},"Number"),(0,l.mdx)("td",{parentName:"tr",align:null},"HTTP status code")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"message"),(0,l.mdx)("td",{parentName:"tr",align:null},"String"),(0,l.mdx)("td",{parentName:"tr",align:null},"A message about the response. For instance, it may indicate if the response was decided ",(0,l.mdx)("a",{parentName:"td",href:"../../sdk-guides/on-device-decisioning/index.md"},"on-device")," or server-side")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"remoteMboxes"),(0,l.mdx)("td",{parentName:"tr",align:null},"Array"),(0,l.mdx)("td",{parentName:"tr",align:null},"When decisioning Method is ",(0,l.mdx)("inlineCode",{parentName:"td"},"on-device"),", an array of mbox names that could not be fully decided on-device is given. In other words, a ",(0,l.mdx)("a",{parentName:"td",href:"../../api/delivery-api/index.md"},"Target Delivery API")," request is needed.")))),(0,l.mdx)("h2",{id:"example"},"Example"),(0,l.mdx)(p,{slots:"heading, code",repeat:"1",languages:"js",mdxType:"CodeBlock"}),(0,l.mdx)("h3",{id:"nodejs"},"Node.js"),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-js"},'const TargetClient = require("@adobe/target-nodejs-sdk");\nconst CONFIG = {\n  client: "acmeclient",\n  organizationId: "1234567890@AdobeOrg"\n};\n\nconst targetClient = TargetClient.create(CONFIG);\n\nconst request = {\n    context: {channel: "web"},\n    execute: {\n        mboxes: [{\n            name: "a1-serverside-ab",\n            index: 1\n        }]\n}};\n\nconst response = await targetClient.getOffers({ request });\n')))}u.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-implement-server-side-node-js-get-offers-md-b365810d70bf858b104e.js.map