"use strict";(self.webpackChunktarget_developers=self.webpackChunktarget_developers||[]).push([[3659],{78730:function(e,t,n){n.r(t),n.d(t,{_frontmatter:function(){return o},default:function(){return u}});var a,r=n(87462),l=n(63366),d=(n(15007),n(64983)),m=n(91515),i=["components"],o={},p=(a="CodeBlock",function(e){return console.warn("Component "+a+" was not imported, exported, or provided by MDXProvider as global scope"),(0,d.mdx)("div",e)}),s={_frontmatter:o},x=m.Z;function u(e){var t=e.components,n=(0,l.Z)(e,i);return(0,d.mdx)(x,(0,r.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,d.mdx)("h1",{id:"get-offers"},"Get Offers"),(0,d.mdx)("h2",{id:"description"},"Description"),(0,d.mdx)("p",null,(0,d.mdx)("inlineCode",{parentName:"p"},"get_offers()")," is used to execute a decision and retrieve an experience from Adobe Target."),(0,d.mdx)("h2",{id:"method"},"Method"),(0,d.mdx)(p,{slots:"heading, code",repeat:"1",languages:"python",mdxType:"CodeBlock"}),(0,d.mdx)("h3",{id:"getoffers"},"getOffers"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-python"},"target_client_instance.get_offers(options)\n")),(0,d.mdx)("h2",{id:"parameters"},"Parameters"),(0,d.mdx)("p",null,"The ",(0,d.mdx)("inlineCode",{parentName:"p"},"options")," dict has the following structure:"),(0,d.mdx)("table",null,(0,d.mdx)("thead",{parentName:"table"},(0,d.mdx)("tr",{parentName:"thead"},(0,d.mdx)("th",{parentName:"tr",align:null},"Name"),(0,d.mdx)("th",{parentName:"tr",align:null},"Type"),(0,d.mdx)("th",{parentName:"tr",align:null},"Required"),(0,d.mdx)("th",{parentName:"tr",align:null},"Default"),(0,d.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,d.mdx)("tbody",{parentName:"table"},(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"request"),(0,d.mdx)("td",{parentName:"tr",align:null},"DeliveryRequest"),(0,d.mdx)("td",{parentName:"tr",align:null},"Yes"),(0,d.mdx)("td",{parentName:"tr",align:null},"None"),(0,d.mdx)("td",{parentName:"tr",align:null},"Conforms to the ",(0,d.mdx)("a",{parentName:"td",href:"/target-developers/src/pages/implement/delivery-api/index.md"},"Target Delivery API")," request")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"target_cookie"),(0,d.mdx)("td",{parentName:"tr",align:null},"str"),(0,d.mdx)("td",{parentName:"tr",align:null},"no"),(0,d.mdx)("td",{parentName:"tr",align:null},"None"),(0,d.mdx)("td",{parentName:"tr",align:null},"Target cookie")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"target_location_hint"),(0,d.mdx)("td",{parentName:"tr",align:null},"str"),(0,d.mdx)("td",{parentName:"tr",align:null},"no"),(0,d.mdx)("td",{parentName:"tr",align:null},"None"),(0,d.mdx)("td",{parentName:"tr",align:null},"Target location hint")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"consumer_id"),(0,d.mdx)("td",{parentName:"tr",align:null},"str"),(0,d.mdx)("td",{parentName:"tr",align:null},"no"),(0,d.mdx)("td",{parentName:"tr",align:null},"None"),(0,d.mdx)("td",{parentName:"tr",align:null},"When stitching multiple calls, different consumer IDs should be provided")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"customer_ids"),(0,d.mdx)("td",{parentName:"tr",align:null},"list","[CustomerId]"),(0,d.mdx)("td",{parentName:"tr",align:null},"no"),(0,d.mdx)("td",{parentName:"tr",align:null},"None"),(0,d.mdx)("td",{parentName:"tr",align:null},"A list of Customer Ids in VisitorId-compatible format")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"session_id"),(0,d.mdx)("td",{parentName:"tr",align:null},"str"),(0,d.mdx)("td",{parentName:"tr",align:null},"no"),(0,d.mdx)("td",{parentName:"tr",align:null},"None"),(0,d.mdx)("td",{parentName:"tr",align:null},"Used for linking multiple requests")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"callback"),(0,d.mdx)("td",{parentName:"tr",align:null},"callable"),(0,d.mdx)("td",{parentName:"tr",align:null},"no"),(0,d.mdx)("td",{parentName:"tr",align:null},"None"),(0,d.mdx)("td",{parentName:"tr",align:null},"If handling request asynchronously, the callback is invoked when response is ready")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"err_callback"),(0,d.mdx)("td",{parentName:"tr",align:null},"callable"),(0,d.mdx)("td",{parentName:"tr",align:null},"no"),(0,d.mdx)("td",{parentName:"tr",align:null},"None"),(0,d.mdx)("td",{parentName:"tr",align:null},"If handling request asynchronously, error callback is invoked when exception is raised")))),(0,d.mdx)("h2",{id:"returns"},"Returns"),(0,d.mdx)("p",null,"Returns a ",(0,d.mdx)("inlineCode",{parentName:"p"},"TargetDeliveryResponse")," if called synchronously (default), or an ",(0,d.mdx)("inlineCode",{parentName:"p"},"AsyncResult")," if called with a callback. ",(0,d.mdx)("inlineCode",{parentName:"p"},"TargetDeliveryResponse")," has the following structure:"),(0,d.mdx)("table",null,(0,d.mdx)("thead",{parentName:"table"},(0,d.mdx)("tr",{parentName:"thead"},(0,d.mdx)("th",{parentName:"tr",align:null},"Name"),(0,d.mdx)("th",{parentName:"tr",align:null},"Type"),(0,d.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,d.mdx)("tbody",{parentName:"table"},(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"response"),(0,d.mdx)("td",{parentName:"tr",align:null},"DeliveryResponse"),(0,d.mdx)("td",{parentName:"tr",align:null},"Conforms to the ",(0,d.mdx)("a",{parentName:"td",href:"/target-developers/src/pages/implement/delivery-api/index.md"},"Target Delivery API")," response")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"target_cookie"),(0,d.mdx)("td",{parentName:"tr",align:null},"dict"),(0,d.mdx)("td",{parentName:"tr",align:null},"Target cookie")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"target_location_hint_cookie"),(0,d.mdx)("td",{parentName:"tr",align:null},"dict"),(0,d.mdx)("td",{parentName:"tr",align:null},"Target location hint cookie")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"analytics_details"),(0,d.mdx)("td",{parentName:"tr",align:null},"list","[AnalyticsResponse]"),(0,d.mdx)("td",{parentName:"tr",align:null},"Analytics payload, in case of client side Analytics usage")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"trace"),(0,d.mdx)("td",{parentName:"tr",align:null},"list","[dict]"),(0,d.mdx)("td",{parentName:"tr",align:null},"Aggregated trace data for all request mboxes/views")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"response_tokens"),(0,d.mdx)("td",{parentName:"tr",align:null},"list","[dict]"),(0,d.mdx)("td",{parentName:"tr",align:null},"A list of â€‹",(0,d.mdx)("a",{parentName:"td",href:"https://experienceleague.adobe.com/docs/target/using/administer/response-tokens.html"},"Response Tokens"))),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"meta"),(0,d.mdx)("td",{parentName:"tr",align:null},"dict"),(0,d.mdx)("td",{parentName:"tr",align:null},"Additional decisioning metadata for use with on-device-decisioning")))),(0,d.mdx)("p",null,(0,d.mdx)("inlineCode",{parentName:"p"},"target_cookie")," and ",(0,d.mdx)("inlineCode",{parentName:"p"},"target_location_hint_cookie")," objects used for passing data back to the browser have the following structure:"),(0,d.mdx)("table",null,(0,d.mdx)("thead",{parentName:"table"},(0,d.mdx)("tr",{parentName:"thead"},(0,d.mdx)("th",{parentName:"tr",align:null},"Name"),(0,d.mdx)("th",{parentName:"tr",align:null},"Type"),(0,d.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,d.mdx)("tbody",{parentName:"table"},(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"name"),(0,d.mdx)("td",{parentName:"tr",align:null},"str"),(0,d.mdx)("td",{parentName:"tr",align:null},"Cookie name")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"value"),(0,d.mdx)("td",{parentName:"tr",align:null},"any"),(0,d.mdx)("td",{parentName:"tr",align:null},"Cookie value, the value will be converted to string")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"max_age"),(0,d.mdx)("td",{parentName:"tr",align:null},"int"),(0,d.mdx)("td",{parentName:"tr",align:null},"The ",(0,d.mdx)("inlineCode",{parentName:"td"},"max_age option")," is a convenience for setting expires relative to the current time in seconds")))),(0,d.mdx)("p",null,"The ",(0,d.mdx)("inlineCode",{parentName:"p"},"meta")," object used for indicating the status of the target response has the following structure:"),(0,d.mdx)("table",null,(0,d.mdx)("thead",{parentName:"table"},(0,d.mdx)("tr",{parentName:"thead"},(0,d.mdx)("th",{parentName:"tr",align:null},"Name"),(0,d.mdx)("th",{parentName:"tr",align:null},"Type"),(0,d.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,d.mdx)("tbody",{parentName:"table"},(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"decisioning_method"),(0,d.mdx)("td",{parentName:"tr",align:null},"str"),(0,d.mdx)("td",{parentName:"tr",align:null},"Which decisioning method was used: on-device or server-side")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"remote_mboxes"),(0,d.mdx)("td",{parentName:"tr",align:null},"list","[str]"),(0,d.mdx)("td",{parentName:"tr",align:null},"When decisioning Method is ",(0,d.mdx)("inlineCode",{parentName:"td"},"on-device"),", an array of mbox names that could not be fully decided on-device is given. In other words, a ",(0,d.mdx)("a",{parentName:"td",href:"/target-developers/src/pages/implement/delivery-api/index.md"},"Target Delivery API")," request is needed.")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"remote_views"),(0,d.mdx)("td",{parentName:"tr",align:null},"list","[str]"),(0,d.mdx)("td",{parentName:"tr",align:null},"When decisioning Method is on-device, an array of view names that could not be fully decided on-device is given. In other words, a ",(0,d.mdx)("a",{parentName:"td",href:"/target-developers/src/pages/implement/delivery-api/index.md"},"Target Delivery API")," request is needed.")))),(0,d.mdx)("h2",{id:"example"},"Example"),(0,d.mdx)(p,{slots:"heading, code",repeat:"1",languages:"python",mdxType:"CodeBlock"}),(0,d.mdx)("h3",{id:"python"},"Python"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-python"},'def client_ready_callback():\n    context = Context(channel=ChannelType.WEB)\n    mboxes = [MboxRequest(name="a1-serverside-ab", index=1)]\n    execute = ExecuteRequest(mboxes=mboxes)\n    delivery_request = DeliveryRequest(context=context, execute=execute)\n\n    get_offers_options = {\n      "request": delivery_request\n    }\n\n    target_delivery_response = target_client.get_offers(get_offers_options)\n\n\nclient_options = {\n    "client": "acmeclient",\n    "organization_id": "1234567890@AdobeOrg",\n    "events": {\n        "client_ready": client_ready_callback\n    }\n}\ntarget_client = TargetClient.create(client_options)\n')))}u.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-implement-server-side-python-get-offers-md-5f8af6bfd826c1e5e55e.js.map