"use strict";(self.webpackChunktarget_developers=self.webpackChunktarget_developers||[]).push([[2067],{71038:function(e,t,n){n.r(t),n.d(t,{_frontmatter:function(){return m},default:function(){return x}});var a,r=n(87462),o=n(63366),l=(n(15007),n(64983)),d=n(91515),i=["components"],m={},p=(a="InlineAlert",function(e){return console.warn("Component "+a+" was not imported, exported, or provided by MDXProvider as global scope"),(0,l.mdx)("div",e)}),s={_frontmatter:m},c=d.Z;function x(e){var t=e.components,n=(0,o.Z)(e,i);return(0,l.mdx)(c,(0,r.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,l.mdx)("h1",{id:"adobetargetapplyoffersoptions---atjs-2x"},"adobe.target.applyOffers(options) - at.js 2.x"),(0,l.mdx)("p",null,"This function lets you apply more than one offer that was retrieved by ",(0,l.mdx)("inlineCode",{parentName:"p"},"adobe.target.getOffers()"),"."),(0,l.mdx)(p,{variant:"info",slots:"text",mdxType:"InlineAlert"}),(0,l.mdx)("p",null,"This function was introduced with at.js 2.x. This function is not available for at.js version 1.",(0,l.mdx)("em",{parentName:"p"},"x"),"."),(0,l.mdx)("table",null,(0,l.mdx)("thead",{parentName:"table"},(0,l.mdx)("tr",{parentName:"thead"},(0,l.mdx)("th",{parentName:"tr",align:null},"Key"),(0,l.mdx)("th",{parentName:"tr",align:null},"Type"),(0,l.mdx)("th",{parentName:"tr",align:null},"Required?"),(0,l.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,l.mdx)("tbody",{parentName:"table"},(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"selector"),(0,l.mdx)("td",{parentName:"tr",align:null},"String"),(0,l.mdx)("td",{parentName:"tr",align:null},"No"),(0,l.mdx)("td",{parentName:"tr",align:null},"HTML element or CSS selector used to identify the HTML element where Target should place the offer content. If a selector is not provided, Target assumes that the HTML element to use is HTML HEAD.")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"Response"),(0,l.mdx)("td",{parentName:"tr",align:null},"Object"),(0,l.mdx)("td",{parentName:"tr",align:null},"Yes"),(0,l.mdx)("td",{parentName:"tr",align:null},"Response object from ",(0,l.mdx)("inlineCode",{parentName:"td"},"getOffers()"),".",(0,l.mdx)("br",null),"See Requests table below.")))),(0,l.mdx)("h2",{id:"response"},"Response"),(0,l.mdx)(p,{variant:"info",slots:"text",mdxType:"InlineAlert"}),(0,l.mdx)("p",null,"Consult the ",(0,l.mdx)("a",{parentName:"p",href:"../../../delivery-api/index.md"},"Delivery API documentation")," for information about the acceptable types for all fields listed below."),(0,l.mdx)("table",null,(0,l.mdx)("thead",{parentName:"table"},(0,l.mdx)("tr",{parentName:"thead"},(0,l.mdx)("th",{parentName:"tr",align:null},"Field Name"),(0,l.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,l.mdx)("tbody",{parentName:"table"},(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"response > prefetch > views > options > content"),(0,l.mdx)("td",{parentName:"tr",align:null},'Note that the content of the "option" is not well-defined and depends directly on the option type/template structure.')),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"response > prefetch > views > options > type"),(0,l.mdx)("td",{parentName:"tr",align:null},'Option type. Reflects type of "content" field. Supported type is actions.')),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"response > prefetch > views > state"),(0,l.mdx)("td",{parentName:"tr",align:null},"An opaque view state token that should be forwarded with display notification for the view")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"response > prefetch  > views > options > responseTokens"),(0,l.mdx)("td",{parentName:"tr",align:null},"Contains the map of ",(0,l.mdx)("inlineCode",{parentName:"td"},"responseTokens")," that have been collected when the current option was being processed.")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"response > prefetch  > views > analytics > payload"),(0,l.mdx)("td",{parentName:"tr",align:null},"Analytics payload for client-side integration that should be sent to Analytics after the view has been applied.")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"response > prefetch  > views > trace"),(0,l.mdx)("td",{parentName:"tr",align:null},"The object containing all trace data for the prefetch call per view.",(0,l.mdx)("br",null),"The trace object will also include a version for the trace.",(0,l.mdx)("br",null),"The trace object will also include details of the current view.")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"response > prefetch  > views > options > eventToken"),(0,l.mdx)("td",{parentName:"tr",align:null},"Event logging is done per option. For every applied option the respective event token should to be added to the list of notification tokens. Note that a View is composed of multiple options. If all options have been applied and seen, all ",(0,l.mdx)("inlineCode",{parentName:"td"},"eventTokens")," need to be included in the notification.")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"response > prefetch  > views > name"),(0,l.mdx)("td",{parentName:"tr",align:null},"The human-readable view name.")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"response > prefetch  > views > metrics"),(0,l.mdx)("td",{parentName:"tr",align:null},"Reporting metrics that should be watched and then notify Target about. Currently, just click metric is supported. In case a click on the element happens, the appropriate ",(0,l.mdx)("inlineCode",{parentName:"td"},"eventTokens")," should be collected and a notification should be sent.")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"response > prefetch  > views > key"),(0,l.mdx)("td",{parentName:"tr",align:null},"The key or fingerprint that identifies the view.")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"response > prefetch  > views > id"),(0,l.mdx)("td",{parentName:"tr",align:null},"ID of the view.")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"response > notifications > id"),(0,l.mdx)("td",{parentName:"tr",align:null},"Notification ID.")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"response > notifications > events > type"),(0,l.mdx)("td",{parentName:"tr",align:null},"The type of the notification, click, or display.")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"response > notifications > events > trace"),(0,l.mdx)("td",{parentName:"tr",align:null},"The trace for the notification event.")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"response > notifications > events > token"),(0,l.mdx)("td",{parentName:"tr",align:null},"The token that was sent with the notification event.")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"response > notifications > events > timestamp"),(0,l.mdx)("td",{parentName:"tr",align:null},"The timestamp that was sent with the notification event.")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"response > notifications > events > errorCode"),(0,l.mdx)("td",{parentName:"tr",align:null},"If the notification failed, the code indicates the reason for the failure.")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"response > notifications > events"),(0,l.mdx)("td",{parentName:"tr",align:null},"The events that were logged or failed to be logged for the current notification.")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"response > notifications"),(0,l.mdx)("td",{parentName:"tr",align:null},"Indicates the logged or failed notifications.")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"response > execute > mboxes > mbox > trace"),(0,l.mdx)("td",{parentName:"tr",align:null},"The object containing all trace data for the individual mbox request.")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"response > execute > mboxes > mbox > responseTokens"),(0,l.mdx)("td",{parentName:"tr",align:null},"Contains map of ",(0,l.mdx)("inlineCode",{parentName:"td"},"responseTokens")," for specific mbox request execution.")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"response > execute > mboxes > mbox > option > content"),(0,l.mdx)("td",{parentName:"tr",align:null},'Note that the content of the "option" is not well-defined and depends directly on the option type/template structure.')),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"response > execute > mboxes > mbox > option > type"),(0,l.mdx)("td",{parentName:"tr",align:null},'Option type. Reflects type of "content" field. Supported types are: html, redirect, JSON, and dynamic.')),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"response > execute > mboxes > mbox > options"),(0,l.mdx)("td",{parentName:"tr",align:null},"Response option.")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"response > execute > mboxes > mbox > metrics > eventToken"),(0,l.mdx)("td",{parentName:"tr",align:null},"Token of click event.")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"response > execute > mboxes > mbox > metrics > type"),(0,l.mdx)("td",{parentName:"tr",align:null},'"click"')),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"response > execute > mboxes > mbox > metrics"),(0,l.mdx)("td",{parentName:"tr",align:null},"Contains list of ",(0,l.mdx)("inlineCode",{parentName:"td"},"clickThrough")," metrics.")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"response > execute > mboxes > mbox > mbox"),(0,l.mdx)("td",{parentName:"tr",align:null},"The name of the mbox.")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"response > execute > mboxes > mbox >index"),(0,l.mdx)("td",{parentName:"tr",align:null},"Indicates that the response is for mbox with this index from the request.")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"response > execute > mboxes > mbox > analytics > payload"),(0,l.mdx)("td",{parentName:"tr",align:null},"Analytics payload for client-side integration that should be sent to Analytics after the mbox has been applied. (See A4T-enabled Campaigns section.)")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"response > execute > mboxes"),(0,l.mdx)("td",{parentName:"tr",align:null},"List of executed mboxes.")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"response > execute > pageLoad > options > content"),(0,l.mdx)("td",{parentName:"tr",align:null},'Note that the content of the "option" is not well-defined and depends directly on the option type/template structure.')),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"response > execute > pageLoad > options > type"),(0,l.mdx)("td",{parentName:"tr",align:null},'Option type. Reflects type of "content" field. Supported types are: html, redirect, JSON, dynamic, and actions.')),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"response > execute > pageLoad > options"),(0,l.mdx)("td",{parentName:"tr",align:null},"Options that aren't grouped by views (target-global-mbox + options from activities with views not grouped by views).")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"response > execute > pageLoad > metrics"),(0,l.mdx)("td",{parentName:"tr",align:null},"Click metrics that were not set to belong to a specific view.")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"response > execute > pageLoad > trace"),(0,l.mdx)("td",{parentName:"tr",align:null},"The object containing all trace data for the pageLoad request.")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"response > execute > pageLoad > analytics > payload"),(0,l.mdx)("td",{parentName:"tr",align:null},"Analytics payload for client-side integration that should be sent to Analytics after the page load content has been applied. (See A4T-enabled Campaigns section.)")))),(0,l.mdx)("h2",{id:"example-applyoffers-call"},"Example applyOffers() call"),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-javascript"},'adobe.target.applyOffers({response:{\n  "execute": {\n    "pageLoad": {\n      "options": [{\n        "type": "html",\n        "content": "page-load"\n      },\n      {\n        "type": "actions",\n        "content": [{\n          "type": "setHtml",\n          "content": "<h1>Container 1</h1>",\n          "selector": "#container1",\n          "cssSelector": "#container1"\n        },\n        {\n          "type": "setHtml",\n          "content": "<h3>Container 3</h3>",\n          "selector": "#container3",\n          "cssSelector": "#container3"\n        }]\n      }],\n \n \n      "metrics": [{\n        "type": "click",\n        "selector": "#container1",\n        "eventToken": "page-load-click-metric" \n      }]\n    }\n  }\n}});\n')),(0,l.mdx)("h2",{id:"example-calls-of-promise-chaining-with-getoffers-and-applyoffers-because-these-functions-are-promise-based"},"Example calls of Promise chaining with ",(0,l.mdx)("inlineCode",{parentName:"h2"},"getOffers()")," and ",(0,l.mdx)("inlineCode",{parentName:"h2"},"applyOffers()"),", because these functions are Promise based"),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-javascript"},'adobe.target.getOffers({...})\n.then(response => adobe.target.applyOffers({ response: response }))\n.then(() => console.log("Success"))\n.catch(error => console.log("Error", error));\n')),(0,l.mdx)("p",null,"For more examples on how to use getOffers(), please refer to the getOffers ",(0,l.mdx)("a",{parentName:"p",href:"adobe-target-getoffers-atjs-2.md"},"documentation")),(0,l.mdx)("h3",{id:"page-load-request-example"},"Page Load Request Example"),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-javascript"},'adobe.target.getOffers({\n    request: {\n        execute: {\n            pageLoad: {}\n        }\n    }\n}).\nthen(response => adobe.target.applyOffers({ response: response }))\n.then(() => console.log("Success"))\n.catch(error => console.log("Error", error));\n')))}x.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-implement-client-side-atjs-atjs-functions-adobe-target-applyoffers-atjs-2-md-0379f3ea7df4f453dad6.js.map