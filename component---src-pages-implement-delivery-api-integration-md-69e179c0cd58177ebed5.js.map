{"version":3,"file":"component---src-pages-implement-delivery-api-integration-md-69e179c0cd58177ebed5.js","mappings":"uRAQaA,EAAe,CAAC,EACvBC,EAAc,CAClBD,aAAAA,GAEIE,EAAYC,EAAAA,EACH,SAASC,EAAT,GAGZ,IAFDC,EAEC,EAFDA,WACGC,GACF,YACD,OAAO,SAACJ,GAAD,UAAeD,EAAiBK,EAAhC,CAAuCD,WAAYA,EAAYE,QAAQ,eAG5E,eACE,GAAM,qCADR,sCAGA,eACE,GAAM,kCADR,qCAGA,qaACA,oBACE,eAAIC,WAAW,MAAf,oIACA,eAAIA,WAAW,MAAf,gIAEF,eACE,GAAM,6DADR,8DAGA,qKACA,oBACE,eAAIA,WAAW,OAAK,uBAAYA,WAAW,MAAvB,sBAApB,kFACA,eAAIA,WAAW,OAAK,uBAAYA,WAAW,MAAvB,kBAApB,iIAAgN,uBAAYA,WAAW,MAAvB,sBAAhN,kEAEF,qBAAK,iBAAMA,WAAW,OAAjB,yjCAyCL,eACE,GAAM,gDADR,iDAGA,wMAAyL,cAAGA,WAAW,IACnM,KAAQ,gGAD6K,sBAAzL,0DAEyF,uBAAYA,WAAW,KAAvB,eAFzF,YAE4J,uBAAYA,WAAW,KAAvB,WAF5J,qJAGA,qBAAK,iBAAMA,WAAW,OAAjB,6kCA4CL,8CAA+B,uBAAYA,WAAW,KAAvB,WAA/B,OAAyF,uBAAYA,WAAW,KAAvB,eAAzF,0CAA0L,uBAAYA,WAAW,KAAvB,QAA1L,2BACA,qBAAK,iBAAMA,WAAW,OAAjB,4+CAmDL,2EAA4D,uBAAYA,WAAW,KAAvB,aAA5D,QAAyH,uBAAYA,WAAW,KAAvB,WAAzH,kKACA,qBAAK,iBAAMA,WAAW,OAAjB,oIAGL,eACE,GAAM,yCADR,0CAGA,uBACE,kBAAOA,WAAW,UAChB,eAAIA,WAAW,UACb,eAAIA,WAAW,KACb,MAAS,MADX,eAGA,eAAIA,WAAW,KACb,MAAS,MADX,aAGA,eAAIA,WAAW,KACb,MAAS,MADX,kBAKJ,kBAAOA,WAAW,UAChB,eAAIA,WAAW,UACb,eAAIA,WAAW,KACb,MAAS,OACR,uBAAYA,WAAW,MAAvB,UACH,eAAIA,WAAW,KACb,MAAS,MADX,QAGA,eAAIA,WAAW,KACb,MAAS,MADX,yBAIF,eAAIA,WAAW,UACb,eAAIA,WAAW,KACb,MAAS,OACR,uBAAYA,WAAW,MAAvB,QACH,eAAIA,WAAW,KACb,MAAS,MADX,QAGA,eAAIA,WAAW,KACb,MAAS,MADX,8BAEiC,uBAAYA,WAAW,MAAvB,UAEnC,eAAIA,WAAW,UACb,eAAIA,WAAW,KACb,MAAS,OACR,uBAAYA,WAAW,MAAvB,UACH,eAAIA,WAAW,KACb,MAAS,MADX,QAGA,eAAIA,WAAW,KACb,MAAS,MADX,mDAEsD,uBAAYA,WAAW,MAAvB,aAFtD,QAEoH,uBAAYA,WAAW,MAAvB,WAFpH,QAEgL,uBAAYA,WAAW,MAAvB,WAElL,eAAIA,WAAW,UACb,eAAIA,WAAW,KACb,MAAS,OACR,uBAAYA,WAAW,MAAvB,6BACH,eAAIA,WAAW,KACb,MAAS,MADX,+BAGA,eAAIA,WAAW,KACb,MAAS,WAKjB,eACE,GAAM,0BADR,2BAGA,uBACE,kBAAOA,WAAW,UAChB,eAAIA,WAAW,UACb,eAAIA,WAAW,KACb,MAAS,MADX,gBAGA,eAAIA,WAAW,KACb,MAAS,MADX,mBAKJ,kBAAOA,WAAW,UAChB,eAAIA,WAAW,UACb,eAAIA,WAAW,KACb,MAAS,MADX,SAGA,eAAIA,WAAW,KACb,MAAS,MADX,wEAMN,eACE,GAAM,2CADR,4CAGA,qBAAK,iBAAMA,WAAW,OAAjB,gHAEL,eACE,GAAM,0BADR,2BAGA,4LACA,uBACE,kBAAOA,WAAW,UAChB,eAAIA,WAAW,UACb,eAAIA,WAAW,KACb,MAAS,MADX,eAGA,eAAIA,WAAW,KACb,MAAS,MADX,aAGA,eAAIA,WAAW,KACb,MAAS,MADX,kBAKJ,kBAAOA,WAAW,UAChB,eAAIA,WAAW,UACb,eAAIA,WAAW,KACb,MAAS,OACR,uBAAYA,WAAW,MAAvB,kBACH,eAAIA,WAAW,KACb,MAAS,MADX,QAGA,eAAIA,WAAW,KACb,MAAS,MADX,0HAIF,eAAIA,WAAW,UACb,eAAIA,WAAW,KACb,MAAS,OACR,uBAAYA,WAAW,MAAvB,6BACH,eAAIA,WAAW,KACb,MAAS,MADX,QAGA,eAAIA,WAAW,KACb,MAAS,MADX,gCAIF,eAAIA,WAAW,UACb,eAAIA,WAAW,KACb,MAAS,OACR,uBAAYA,WAAW,MAAvB,UACH,eAAIA,WAAW,KACb,MAAS,MADX,QAGA,eAAIA,WAAW,KACb,MAAS,MADX,gGAMN,qBAAK,iBAAMA,WAAW,OAAjB,msCAkDR,CAEDJ,EAAWK,gBAAiB,C","sources":["webpack://target-developers/./src/pages/implement/delivery-api/integration.md"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/target-developers/target-developers/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"integration-with-experience-cloud\"\n    }}>{`Integration with Experience Cloud`}</h1>\n    <h2 {...{\n      \"id\": \"adobe-analytics-for-target-a4t\"\n    }}>{`Adobe Analytics for Target (A4T)`}</h2>\n    <p>{`When a Target Delivery API call is fired from the server, Adobe Target returns the experience for that user and in addition to that, Adobe Target either returns the Adobe Analytics payload back to the caller or automatically forwards it to Adobe Analytics. In order to send Target activity information to Adobe Analytics on the server side, there are a few pre-requisites that need to be satisfied:`}</p>\n    <ol>\n      <li parentName=\"ol\">{`The activity is set up in the Adobe Target UI with Adobe Analytics as the reporting source and the accounts are enabled for A4T`}</li>\n      <li parentName=\"ol\">{`Adobe Marketing Cloud Visitor ID is generated by the API user, and is available when the Target Delivery API call is fired`}</li>\n    </ol>\n    <h3 {...{\n      \"id\": \"adobe-target-automatically-forwards-the-analytics-payload\"\n    }}>{`Adobe Target Automatically Forwards the Analytics Payload`}</h3>\n    <p>{`Adobe Target can automatically forward the analytics payload to Adobe Analytics via the server side if the following identifiers are provided:`}</p>\n    <ol>\n      <li parentName=\"ol\"><inlineCode parentName=\"li\">{`supplementalDataId`}</inlineCode>{` - The ID that is utilized to stitch between Adobe Analytics and Adobe Target`}</li>\n      <li parentName=\"ol\"><inlineCode parentName=\"li\">{`trackingServer`}</inlineCode>{` - The Adobe Analaytics Server In order for Adobe Target and Adobe Analytics to correctly stitch the data together, the same `}<inlineCode parentName=\"li\">{`supplementalDataId`}</inlineCode>{` need to be passed to both Adobe Target and Adobe Analytics.`}</li>\n    </ol>\n    <pre><code parentName=\"pre\" {...{}}>{`curl -X POST \\\\\n  'https://demo.tt.omtrdc.net/rest/v1/delivery?client=demo&sessionId=d359234570e04f14e1faeeba02d6ab9914e' \\\\\n  -H 'Content-Type: application/json' \\\\\n  -H 'cache-control: no-cache' \\\\\n  -d '{\n      \"context\": {\n        \"channel\": \"web\",\n        \"browser\" : {\n          \"host\" : \"demo\"\n        },\n        \"address\" : {\n          \"url\" : \"http://demo.dev.tt-demo.com/demo/store/index.html\"\n        },\n        \"screen\" : {\n          \"width\" : 1200,\n          \"height\": 1400\n        }\n      },\n      \"id\": {\n        \"marketingCloudVisitorId\": \"2304820394812039\"\n      },\n      \"property\" : {\n        \"token\": \"08b62abd-c3e7-dfb2-da93-96b3aa724d81\"\n      },\n      \"experienceCloud\": {\n        \"analytics\": {\n          \"supplementalDataId\" : \"23423498732598234\",\n          \"trackingServer\": \"ags041.sc.omtrdc.net\",\n          \"logging\": \"server_side\"\n        }\n      },\n        \"execute\": {\n        \"mboxes\" : [\n          {\n            \"name\" : \"homepage\",\n            \"index\" : 1\n          }\n        ]\n      }\n    }'\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"retrieve-analytics-payload-from-adobe-target\"\n    }}>{`Retrieve Analytics Payload from Adobe Target`}</h3>\n    <p>{`Consumers of the Adobe Target Delivery API can retrieve the Adobe Analytics payload for a corresponding mbox so that the consumer can send the payload to Adobe Analytics via the `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/AdobeDocs/analytics-1.4-apis/blob/master/docs/data-insertion-api/index.md\"\n      }}>{`Data Insertion API`}</a>{`. When a server-side Adobe Target call is fired, pass `}<inlineCode parentName=\"p\">{`client_side`}</inlineCode>{` to the `}<inlineCode parentName=\"p\">{`logging`}</inlineCode>{` field in the request. This will in turn return a payload if the mbox is present in an activity that is using Analytics as the reporting source.`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`curl -X POST \\\\\n  'https://demo.tt.omtrdc.net/rest/v1/delivery?client=demo&sessionId=d359234570e04f14e1faeeba02d6ab9914e' \\\\\n  -H 'Content-Type: application/json' \\\\\n  -H 'cache-control: no-cache' \\\\\n  -d '{\n      \"context\": {\n        \"channel\": \"web\",\n        \"browser\" : {\n          \"host\" : \"demo\"\n        },\n        \"address\" : {\n          \"url\" : \"http://demo.dev.tt-demo.com/demo/store/index.html\"\n        },\n        \"screen\" : {\n          \"width\" : 1200,\n          \"height\": 1400\n        }\n      },\n      \"property\" : {\n        \"token\": \"08b62abd-c3e7-dfb2-da93-96b3aa724d81\"\n      },\n      \"experienceCloud\": {\n        \"analytics\": {\n          \"logging\": \"client_side\"\n        }\n      },\n        \"execute\": {\n        \"mboxes\" : [\n          {\n            \"name\" : \"homepage\",\n            \"index\" : 1\n          },\n          {\n            \"name\" : \"SummerShoesOffer\",\n            \"index\" : 2       \n          },\n          {\n            \"name\" : \"SummerDressOffer\",\n            \"index\" : 3       \n          }      \n        ]\n      }\n    }'\n`}</code></pre>\n    <p>{`Once you have specified `}<inlineCode parentName=\"p\">{`logging`}</inlineCode>{` = `}<inlineCode parentName=\"p\">{`client_side`}</inlineCode>{`, you will receive the payload in the `}<inlineCode parentName=\"p\">{`mbox`}</inlineCode>{` field as shown below.`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`{\n    \"status\": 200,\n    \"requestId\": \"4b8855a5-8354-4ac4-8ae7-c551f7c0bb8a\",\n    \"client\": \"demo\",\n    \"id\": {\n        \"tntId\": \"d359234570e04f14e1faeeba02d6ab9914e.28_7\"\n    },\n    \"edgeHost\": \"mboxedge28.tt.omtrdc.net\",\n    \"execute\": {\n        \"mboxes\": [\n            {\n                \"index\": 1,\n                \"name\": \"homepage\",\n                \"options\": [\n                    {\n                        \"content\": \"<p><b>Enjoy this 15% discount on your next purchase</b></p>\",\n                        \"type\": \"html\",\n\n                    }\n                ],\n                \"analytics\": {\n                    \"payload\": {\n                        \"pe\": \"tnt\",\n                        \"tnta\": \"285408:0:0|2\"\n                    }\n                }\n            },\n            {\n                \"index\": 2,\n                \"name\": \"SummerShoesOffer\",\n                \"options\": [\n                    {\n                        \"content\": \"<p><b>Enjoy this 15% discount on your next shoe purchase</b></p>\",\n                        \"type\": \"html\",\n                    }\n                ]\n            },\n            {\n                \"index\": 3,\n                \"name\": \"SummerDressOffer\",\n                \"options\": [\n                    {\n                        \"content\": \"<p><b>Enjoy this 15% discount on your next dress purchase</b></p>\",\n                        \"type\": \"html\",\n                    }\n                ]\n            }\n        ]\n    }\n}\n`}</code></pre>\n    <p>{`If the response from Target contains anything in the `}<inlineCode parentName=\"p\">{`analytics`}</inlineCode>{` -> `}<inlineCode parentName=\"p\">{`payload`}</inlineCode>{` property, forward it as it is to Adobe Analytics. Analytics knows how to process this payload. This can be done in a GET request using the following format:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`https://{datacollectionhost.sc.omtrdc.net}/b/ss/{rsid}/0/CODEVERSION?pe=tnt&tnta={payload}&mcid={mcid}&vid={vid}&aid={aid}\n\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"query-string-parameters-and-variables\"\n    }}>{`Query String Parameters and Variables`}</h3>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Field Name`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Required`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Description`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`rsid`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Yes`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`The report suite ID`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`pe`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Yes`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Page event. Always set to `}<inlineCode parentName=\"td\">{`tnt`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`tnta`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Yes`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Analytics payload returned by Target server in `}<inlineCode parentName=\"td\">{`analytics`}</inlineCode>{` -> `}<inlineCode parentName=\"td\">{`payload`}</inlineCode>{` -> `}<inlineCode parentName=\"td\">{`tnta`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`marketingCloudVisitorId`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Marketing Cloud Visitor ID`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}></td>\n        </tr>\n      </tbody>\n    </table>\n    <h3 {...{\n      \"id\": \"required-header-values\"\n    }}>{`Required Header Values`}</h3>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Header Name`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Header Value`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Host`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Analytics data collection server (eg: adobeags421.sc.omtrdc.net)`}</td>\n        </tr>\n      </tbody>\n    </table>\n    <h3 {...{\n      \"id\": \"sample-a4t-data-insertion-http-get-call\"\n    }}>{`Sample A4T Data Insertion HTTP Get Call`}</h3>\n    <pre><code parentName=\"pre\" {...{}}>{`https://demo.sc.omtrdc.net/b/ss/myCustomRsid/0/MOBILE-1.0?pe=tnt&tnta=285408:0:0|2&mcid=2304820394812039\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"adobe-audience-manager\"\n    }}>{`Adobe Audience Manager`}</h2>\n    <p>{`Adobe Audience Manager (AAM) segments can also be leveraged via Adobe Target Delivery APIs. In order to leverage AAM segments, the following fields must be provided:`}</p>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Field Name`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Required`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Description`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`locationHint`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Yes`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`DCS Location Hint is used to determine which AAM DCS Endpoint to hit in order to retrieve the profile. Must be >= 1.`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`marketingCloudVisitorId`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Yes`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Marketing Cloud Visitor ID`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`blob`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Yes`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`AAM Blob is used to send additional data to AAM. Must not be blank and the size <= 1024.`}</td>\n        </tr>\n      </tbody>\n    </table>\n    <pre><code parentName=\"pre\" {...{}}>{`curl -X POST \\\\\n  'https://demo.tt.omtrdc.net/rest/v1/delivery?client=demo&sessionId=d359234570e04f14e1faeeba02d6ab9914e' \\\\\n  -H 'Content-Type: application/json' \\\\\n  -H 'cache-control: no-cache' \\\\\n  -d '{\n      \"context\": {\n        \"channel\": \"web\",\n        \"browser\" : {\n          \"host\" : \"demo\"\n        },\n        \"address\" : {\n          \"url\" : \"http://demo.dev.tt-demo.com/demo/store/index.html\"\n        },\n        \"screen\" : {\n          \"width\" : 1200,\n          \"height\": 1400\n        }\n      },\n      \"id\": {\n        \"marketingCloudVisitorId\": \"2304820394812039\"\n      },\n      \"property\" : {\n        \"token\": \"08b62abd-c3e7-dfb2-da93-96b3aa724d81\"\n      },\n      \"experienceCloud\": {\n        \"audienceManager\": {\n          \"locationHint\": 9,\n          \"blob\": \"32fdghkjh34kj5h43\"\n        }\n      },\n        \"execute\": {\n        \"mboxes\" : [\n          {\n            \"name\" : \"homepage\",\n            \"index\" : 1\n          },\n          {\n            \"name\" : \"SummerShoesOffer\",\n            \"index\" : 2       \n          },\n          {\n            \"name\" : \"SummerDressOffer\",\n            \"index\" : 3       \n          }      \n        ]\n      }\n    }'\n`}</code></pre>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent"],"sourceRoot":""}